!function(t){t.confetti=new function(){function n(t){this.x=Math.random()*p,this.y=Math.random()*v-v,this.r=h(10,30),this.d=Math.random()*I+10,this.color=t,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return g.beginPath(),g.lineWidth=this.r/2,g.strokeStyle=this.color,g.moveTo(this.x+this.tilt+this.r/4,this.y),g.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),g.stroke()}}function i(){e(),o(),t(window).resize(function(){p=window.innerWidth,v=window.innerHeight,y.width=p,y.height=v})}function o(){t("#startConfetti").click(r),t("#stopConfetti").click(m),t("#restartConfetti").click(M)}function e(){t("body").append('<canvas id="confettiCanvas" style="position:absolute;top:0;left:0;display:none;z-index:1;pointer-events:none;"></canvas>'),y=document.getElementById("confettiCanvas"),g=y.getContext("2d"),p=window.innerWidth,v=window.innerHeight,y.width=p,y.height=v}function r(){y.style.display="block",C=[],F=!1;for(var t=0;t<I;t++){var i=T.getColor();C.push(new n(i))}u()}function a(){g.clearRect(0,0,p,v);for(var t=[],n=0;n<I;n++)!function(n){t.push(C[n].draw())}(n);return l(),t}function h(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function l(){var t,n=0;k+=.01,b+=.1;for(var i=0;i<I;i++){if(t=C[i],F)return;!q&&t.y<-15?t.y=v+100:(c(t,i),t.y<=v&&n++,s(t,i))}0===n&&w()}function s(t,n){(t.x>p+20||t.x<-20||t.y>v)&&q&&(n%5>0||n%2==0?d(t,Math.random()*p,-10,Math.floor(10*Math.random())-10):Math.sin(k)>0?d(t,-5,Math.random()*v,Math.floor(10*Math.random())-10):d(t,p+5,Math.random()*v,Math.floor(10*Math.random())-10))}function c(t,n){t.tiltAngle+=t.tiltAngleIncremental,t.y+=(Math.cos(k+t.d)+3+t.r/2)/2,t.x+=Math.sin(k),t.tilt=15*Math.sin(t.tiltAngle-n/3)}function d(t,n,i,o){t.x=n,t.y=i,t.tilt=o}function u(){p=window.innerWidth,v=window.innerHeight,y.width=p,y.height=v,function t(){return F?null:(A=requestAnimFrame(t),a())}()}function f(){clearTimeout(x),clearTimeout(A)}function m(){q=!1,f()}function w(){F=!0,void 0!=g&&(g.clearRect(0,0,p,v),y.style.display="none")}function M(){f(),w(),x=setTimeout(function(){q=!0,F=!1,r()},100)}var y,g,p,v,x,A,I=150,C=[],k=0,b=0,q=!0,F=!0,T={colorOptions:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return this.colorIncrementer>=10&&(this.colorIncrementer=0,++this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),this.init=i,this.start=r,this.stop=m,this.restart=M},t.confetti.init()}(jQuery);